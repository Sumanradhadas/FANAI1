Modify the FanAI backend to integrate fully with GitHub for all permanent data (celebrities, templates, user generations).
Implement the following detailed changes:

ğŸ” 1ï¸âƒ£ Fetch Celebrities Directly from GitHub

Remove database dependency for celebrity listing and fetching.

Instead, fetch all celebrity JSON data from:

https://raw.githubusercontent.com/{owner}/{repo}/main/celebrities/celebrities.json


Each celebrity entry should include:

{
  "name": "Shah Rukh Khan",
  "slug": "shah-rukh-khan",
  "profession": "Actor",
  "image": "https://raw.githubusercontent.com/{owner}/{repo}/main/celebs/shah-rukh-khan.jpg"
}


Add a 24-hour cache in memory for performance (use node-cache or similar).

Endpoint /api/celebrities and /api/celebrities/:slug should now read directly from GitHub JSON.

ğŸ§  2ï¸âƒ£ Fetch Templates Directly from GitHub

Same for templates â€” no more DB.

Fetch from:

https://raw.githubusercontent.com/{owner}/{repo}/main/templates/templates.json


Parse and serve via /api/templates and /api/templates/:slug.

Add auto-refresh every 12 hours.

ğŸ§‘â€ğŸ’¼ 3ï¸âƒ£ Upload New Celebrity via Admin Panel â†’ Push to GitHub

In admin upload flow (POST /api/admin/celebrities):

Accept multipart/form-data with image and JSON body.

Upload image temporarily to /uploads/{hash}.jpg.

Then use GitHub API (via @octokit/rest) to:

Commit image to celebs/{slug}.jpg.

Update or append entry in celebrities/celebrities.json.

Return success + new URL.

Example GitHub commit path:

fan-ai-celebs/celebs/{slug}.jpg
fan-ai-celebs/celebrities/celebrities.json

ğŸ“¦ 4ï¸âƒ£ Store User Generated Results in GitHub

After generation completes:

Upload processed image (uploads/processed/{id}.png) to GitHub repo:

fan-ai-celebs/users/{userId}/{YYYY-MM-DD}/{generationId}.png


Also commit a metadata JSON alongside:

fan-ai-celebs/users/{userId}/{YYYY-MM-DD}/{generationId}.json


Example metadata:

{
  "userId": "abc123",
  "template": "diwali-celebration",
  "celeb": "shah-rukh-khan",
  "timestamp": "2025-10-22T09:00:00Z"
}

ğŸš€ 5ï¸âƒ£ Auto-Create New Repo If GitHub Limit Reached

In githubClient.ts, add try/catch for upload failures:

If GitHub returns 403 Repo size limit or 422 Validation failed,
â†’ Automatically create a new repo using the GitHub API:

POST https://api.github.com/user/repos


Repo naming format: fan-ai-celebs-{timestamp}

Update .env variable GITHUB_REPO to new repo name at runtime.

Continue upload automatically.

ğŸ”’ 6ï¸âƒ£ Environment Variables (Update .env)

Add:

GITHUB_TOKEN=ghp_your_token_here
GITHUB_OWNER=Sumanradhadas
GITHUB_REPO=fan-ai-celebs
GITHUB_BRANCH=main

ğŸ§  7ï¸âƒ£ Optional Optimizations

Cache celebrity and template JSON locally for 24 hours to reduce GitHub calls.

Add /api/admin/sync-github endpoint to force-refresh manually.

Show commit success toast in admin panel when pushing new celebs or results.

ğŸ§ª Final Verification

Adding a new celeb to GitHub manually â†’ instantly shows on website.

Uploading new celeb in admin â†’ appears in GitHub + shows on site.

User generates image â†’ stored automatically in GitHub under user folder.

If GitHub is full â†’ new repo auto-created and used.

No manual DB syncs required.

ğŸ§© Libraries required:

@octokit/rest â†’ for GitHub commits and repo creation

node-cache â†’ for caching JSON from GitHub

formidable or multer (already present) for uploads

dayjs or date-fns for date folder structure

dotenv for managing env vars

ğŸ” Bonus â€“ GitHub Folder Layout (After Changes)
fan-ai-celebs/
â”œâ”€â”€ celebs/
â”‚   â”œâ”€â”€ shah-rukh-khan.jpg
â”‚   â””â”€â”€ alia-bhatt.jpg
â”œâ”€â”€ celebrities/
â”‚   â””â”€â”€ celebrities.json
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ templates.json
â””â”€â”€ users/
    â”œâ”€â”€ user123/
    â”‚   â””â”€â”€ 2025-10-22/
    â”‚       â”œâ”€â”€ gen-abc123.png
    â”‚       â””â”€â”€ gen-abc123.json


Would you like me to generate the ready-to-paste code snippets (for githubClient.ts, routes for upload, and auto-create repo logic) next?
That way you can directly integrate this behavior into your backend.